[mysqld]
#bind-address            = 0.0.0.0

#server_id               = 1
#user                    = mysql
#log_bin                 = master-bin
#binlog-format           = mixed
#log_slave_updates       = on

general_log             = 1
general_log_file        = /var/log/mysql/mysql.log
log_error               = /var/log/mysql/error.log

key_buffer_size         = 512M
read_buffer_size        = 512K
read_rnd_buffer_size    = 1M
sort_buffer_size        = 4M
max_allowed_packet      = 32M
thread_stack            = 192K
thread_cache_size       = 16
# This replaces the startup script and checks MyISAM tables if needed
# the first time they are touched
myisam_recover_options  = BACKUP
max_connections         = 2000
#table_cache            = 64
#thread_concurrency     = 10
tmp_table_size          = 32M

#
# * Query Cache Configuration
#
query_cache_limit       = 2M
query_cache_size        = 128M
query_cache_type        = 1

slow_query_log_file     = /var/log/mysql/slow.log
long_query_time         = 1
log_slow_rate_limit     = 1000
log_slow_verbosity      = query_plan
log-queries-not-using-indexes = 1

expire_logs_days        = 5
max_binlog_size         = 100M

#
# * InnoDB
#
# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.
# Read the manual for more InnoDB related options. There are many!
innodb_buffer_pool_size         = 2048M
innodb_log_buffer_size          = 6M
innodb_log_file_size            = 100M
innodb_flush_log_at_trx_commit  = 2
innodb_flush_method             = O_DIRECT
transaction-isolation           = READ-COMMITTED
innodb_file_per_table           = 1

# Add new log file size
innodb_log_file_size    = 512M
# Disable strict mode
innodb_strict_mode      = 0


#
# * Character sets
#
# MySQL/MariaDB default is Latin1, but in Debian we rather default to the full
# utf8 4-byte character set. See also client.cnf
#
character-set-server  = utf8mb4
collation-server      = utf8mb4_general_ci
